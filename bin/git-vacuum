#!/bin/bash
_git_exec_command() {
    V_COMMAND=$1
    echo
    echo '$ '$V_COMMAND
    eval $V_COMMAND
}

V_CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)

_git_exec_command 'git pull'

git rev-parse --verify develop 1>/dev/null 2>&1 && _git_exec_command 'git checkout develop' && _git_exec_command 'git pull'

_git_exec_command 'git checkout master' && _git_exec_command 'git pull'

# 1. Prune local branches
_git_exec_command 'git-local-prune'

# 2. Prune remote branches
_git_exec_command 'git remote prune origin'
_git_exec_command 'git fetch origin --prune'

# 3. Remove local branches that were already merged
_git_exec_command 'git-bclean'

#_git_exec_command 'git fsck'
#_git_exec_command 'git gc --prune=now'

if [[ "$V_CURRENT_BRANCH" != 'master' ]]; then
	_git_exec_command 'git checkout '$V_CURRENT_BRANCH
fi

_git_exec_command 'git branch' # --all
