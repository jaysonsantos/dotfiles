#!env python3
from subprocess import call, check_output

import click
import os


@click.command()
@click.argument('files', nargs=-1)
def pycharm_cli(files):
    """Invoke PyCharm on the command line.

    If a file doesn't exist, call `which` to find out the real location.
    """
    full_paths = []
    for possible_file in files:
        if os.path.isfile(possible_file):
            real_file = os.path.abspath(possible_file)
        else:
            real_file = check_output(['which', possible_file]).decode().strip()
        full_paths.append(real_file)
    command_line = ['/Applications/PyCharm.app/Contents/MacOS/pycharm'] + full_paths
    print(command_line)
    call(command_line)


if __name__ == '__main__':
    pycharm_cli()
